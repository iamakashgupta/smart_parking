{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the SmartPark application.",
      "properties": {
        "name": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "vehicles": {
          "type": "array",
          "items": { "$ref": "#/entities/Vehicle" }
        }
      },
      "required": ["name", "email"]
    },
    "Vehicle": {
      "title": "Vehicle",
      "type": "object",
      "description": "Represents a user's vehicle.",
      "properties": {
        "id": { "type": "string" },
        "make": { "type": "string" },
        "model": { "type": "string" },
        "registrationNumber": { "type": "string" },
        "type": { "type": "string", "enum": ["Compact", "Regular", "Large", "EV"] }
      },
      "required": ["id", "make", "model", "registrationNumber", "type"]
    },
    "ParkingLot": {
      "title": "Parking Lot",
      "type": "object",
      "description": "Represents a parking lot.",
      "properties": {
        "name": { "type": "string" },
        "address": { "type": "string" },
        "distance": { "type": "string" },
        "totalSlots": { "type": "number" },
        "operatingHours": { "type": "string" },
        "rates": {
          "type": "object",
          "properties": {
            "perHour": { "type": "number" },
            "perDay": { "type": "number" }
          }
        },
        "slotTypes": {
          "type": "array",
          "items": { "type": "string" }
        },
        "location": {
          "type": "object",
          "properties": {
            "lat": { "type": "number" },
            "lng": { "type": "number" }
          }
        },
        "images": {
          "type": "array",
          "items": { "type": "string" }
        }
      },
      "required": ["name", "address", "totalSlots"]
    },
    "Slot": {
      "title": "Slot",
      "type": "object",
      "description": "Represents a parking slot within a parking lot.",
      "properties": {
        "lotId": { "type": "string" },
        "level": { "type": "number" },
        "type": { "type": "string" },
        "isOccupied": { "type": "boolean" }
      },
      "required": ["lotId", "type", "isOccupied"]
    },
    "Booking": {
      "title": "Booking",
      "type": "object",
      "description": "Represents a parking booking.",
      "properties": {
        "userId": { "type": "string" },
        "lotId": { "type": "string" },
        "slotId": { "type": "string" },
        "lotName": { "type": "string" },
        "vehicleReg": { "type": "string" },
        "startTime": { "type": "string", "format": "date-time" },
        "endTime": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["Confirmed", "Active", "Completed", "Cancelled"] },
        "totalCost": { "type": "number" }
      },
      "required": ["userId", "lotId", "slotId", "startTime", "status"]
    }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": { "schema": { "$ref": "#/entities/User" } }
      },
      {
        "path": "/parking_lots/{lotId}",
        "definition": { "schema": { "$ref": "#/entities/ParkingLot" } }
      },
      {
        "path": "/parking_lots/{lotId}/slots/{slotId}",
        "definition": { "schema": { "$ref": "#/entities/Slot" } }
      },
      {
        "path": "/bookings/{bookingId}",
        "definition": { "schema": { "$ref": "#/entities/Booking" } }
      }
    ]
  }
}
